{{define "title"}}Edit Swim{{end}}
{{define "main"}}
    {{with $data := .Data}}
        {{with $swim := $data.Swim}}
            <div class="swim-form-page">
                <div class="swim-form-card">
                    <a href="/swims?sort={{$data.Sort}}&direction={{$data.Direction}}" class="back-link">
                        <i class="fas fa-arrow-left"></i>
                        Back
                    </a>
                    <div class="swim-form-header">
                        <div class="header-icon">
                            <i class="fas fa-pen"></i>
                        </div>
                        <div>
                            <h2>Edit Swim</h2>
                            <p>Update the details of this swim entry.</p>
                        </div>
                    </div>

                    <form class="form swim-form"
                          method="POST"
                          action="/swims/edit/{{$swim.Id}}?sort={{$data.Sort}}&direction={{$data.Direction}}"
                          hx-put="/swims/edit/{{$swim.Id}}?sort={{$data.Sort}}&direction={{$data.Direction}}"
                          hx-encoding="application/x-www-form-urlencoded"
                          hx-target="body"
                          hx-push-url="true">
                        <input type="hidden" name="sort" value="{{$data.Sort}}">
                        <input type="hidden" name="direction" value="{{$data.Direction}}">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="date">Date</label>
                                <input type="date" name="date" id="date" value="{{$swim.Date.Format "2006-01-02"}}">
                            </div>
                            <div class="form-group">
                                <label for="distance_m">Distance (m)</label>
                                <input type="number"
                                       name="distance_m"
                                       id="distance_m"
                                       min="1"
                                       value="{{$swim.DistanceM}}">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="assessment">Assessment</label>
                            <select id="assessment" name="assessment">
                                <option value="2" {{if eq $swim.Assessment 2}}selected{{end}}>Good</option>
                                <option value="1" {{if eq $swim.Assessment 1}}selected{{end}}>Neutral</option>
                                <option value="0" {{if eq $swim.Assessment 0}}selected{{end}}>Bad</option>
                            </select>
                        </div>
                        <div class="form-footer">
                            <button type="submit">
                                <i class="fas fa-save"></i>
                                Update
                            </button>
                        </div>
                    </form>
                    <div class="delete-form">
                        <button type="button" class="btn-delete"
                                hx-delete="/swims/{{$swim.Id}}?sort={{$data.Sort}}&direction={{$data.Direction}}"
                                hx-confirm="Are you sure you want to delete this swim? This action cannot be undone."
                                hx-target="body"
                                hx-push-url="true">
                            <i class="fas fa-trash"></i>
                            Delete
                        </button>
                    </div>
                </div>
            </div>
        {{else}}
            <p>Unable to load swim details.</p>
        {{end}}
    {{else}}
        <p>Unable to load swim details.</p>
    {{end}}
{{end}}
